<section layout="vertical" layout-fill>
    <material-toolbar scroll-shrink class="material-theme-green" style="position:relative;">
        <h1 style="margin-top:0;margin-bottom:0; padding-left:25px;">
           {{ profile.realname || profile.username }}
            <i style="color:yellow" class="fa" ng-class="{ 'fa-star' : isFollowing }"></i>
        </h1>
        <p style="text-align:right;">
            {{ profile.followers.length }} followers . {{ profile.followings.length }} following
        </p>
        <material-button class="material-button-fab material-theme-green" ng-click="showMore()" style="bottom:-24px;position:absolute; left:20px;z-index : inherit" hide-md>
            <i class="fa fa-bars"></i>
        </material-button>
        <material-button class="material-button-fab material-theme-green" ng-click="follow()" style="bottom:-24px;position:absolute; right:20px;z-index : inherit" ng-if="!isOwner">
            <i class="fa" ng-class="{ 'fa-thumbs-up' : !isFollowing, 'fa-thumbs-down' : isFollowing }"></i>
        </material-button>
    </material-toolbar>
    <material-content flex>
        <showtags entity="profile" style="margin-left: 50px;"></showtags>
        <h3>Presentation</h3>
        <div ng-bind-html="profile.secureBrief"></div>

        <h3>Contributions</h3>
        <div ng-if="moreData.challenges.length > 0">
            <div>
                <img src="images/svg/challenges.svg"> Created Challenges
            </div>

            <div>
                <challenge-card ng-repeat="challenge in moreData.challenges" admin="true" challenge-id="challenge._id" inline-block></challenge-card>
            </div>
        </div>

        <div ng-if="moreData.followedChallenges.length > 0">
            <div>
                <img src="images/svg/challenges.svg"> Following Challenges
            </div>

            <div>
                <challenge-card ng-repeat="challenge in moreData.followedChallenges" challenge-id="challenge._id" inline-block></challenge-card>
            </div>
        </div>

        <div ng-if="moreData.projects.length > 0">
            <div>
                <i class="fa fa-rocket fa-2x baseColor"></i> Created Projects
            </div>

            <div>
                <project-card ng-repeat="project in moreData.projects" admin="true" project-id="project._id" inline-block></project-card>
            </div>
        </div>

        <div ng-if="moreData.memberProjects.length > 0">
            <div>
                <i class="fa fa-rocket fa-2x baseColor"></i> Contributing to Projects
            </div>

            <div>
                <project-card ng-repeat="project in moreData.memberProjects" project-id="project._id" inline-block></project-card>
            </div>
        </div>

        <div ng-if="moreData.followedProjects.length > 0">
            <div>
                <i class="fa fa-rocket fa-2x baseColor"></i> Following Projects
            </div>

            <div>
                <project-card ng-repeat="project in moreData.followedProjects" project-id="project._id" inline-block></project-card>
            </div>
        </div>

        <div ng-if="moreData.ideas.length > 0">
            <div>
                <img src="images/svg/ideas.svg"> Created Ideas
            </div>

            <div>
                <idea-card ng-repeat="idea in moreData.ideas" idea-id="idea._id" inline-block></idea-card>
            </div>
        </div>

        <div ng-if="moreData.followedIdeas.length > 0">
            <div>
                <img src="images/svg/ideas.svg"> Following Ideas
            </div>

            <div>
                <idea-card ng-repeat="idea in moreData.followedIdeas" idea-id="idea._id" inline-block></idea-card>
            </div>
        </div>

        <h3>Activity</h3>
        <material-list>
            <div ng-repeat="notif in activities">
                <material-item>
                    <div class="material-tile-left">
                        <span time-ago from-time="{{ notif.createDate }}"></span>
                    </div>

                    <material-tile-content ng-if="notif.entityType == 'idea' && notif.type == 'create'" layout="horizontal" layout-align="center center">
                        <span>
                            Created a new idea
                        </span>
                        <idea-info idea-id="notif.entity"></idea-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'idea' && notif.type == 'update'" layout="horizontal" layout-align="center center">
                        <span>
                            Updated the idea
                        </span>
                        <idea-info idea-id="notif.entity"></idea-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'idea' && notif.type == 'remove'" layout="horizontal" layout-align="center center">
                        <span>
                            Removed the idea
                        </span>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'idea' && notif.type == 'follow'" layout="horizontal" layout-align="center center">
                        <span>
                            Followed the idea
                        </span>
                        <idea-info idea-id="notif.entity"></idea-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'idea' && notif.type == 'unfollow'" layout="horizontal" layout-align="center center">
                        <span>
                            Unfollowed the idea
                        </span>
                        <idea-info idea-id="notif.entity"></idea-info>
                    </material-tile-content>

                    <material-tile-content ng-if="notif.entityType == 'challenge' && notif.type == 'create'" layout="horizontal" layout-align="center center">
                        <span>
                            Created a new challenge
                        </span>
                        <challenge-info challenge-id="notif.entity"></challenge-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'challenge' && notif.type == 'update'" layout="horizontal" layout-align="center center">
                        <span>
                            Updated the challenge
                        </span>
                        <challenge-info challenge-id="notif.entity"></challenge-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'challenge' && notif.type == 'remove'" layout="horizontal" layout-align="center center">
                        <span>
                            Removed a challenge
                        </span>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'challenge' && notif.type == 'follow'" layout="horizontal" layout-align="center center">
                        <span>
                            Followed the challenge
                        </span>
                        <challenge-info challenge-id="notif.entity"></challenge-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'challenge' && notif.type == 'unfollow'" layout="horizontal" layout-align="center center">
                        <span>
                            Unfollowed the challenge
                        </span>
                        <challenge-info challenge-id="notif.entity"></challenge-info>
                    </material-tile-content>

                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'create'" layout="horizontal" layout-align="center center">
                        <span>
                            Created a new project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'update'" layout="horizontal" layout-align="center center">
                        <span>
                            Updated the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'remove'" layout="horizontal" layout-align="center center">
                        <span>
                            Removed the project
                        </span>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'follow'" layout="horizontal" layout-align="center center">
                        <span>
                            Followed the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'unfollow'" layout="horizontal" layout-align="center center">
                        <span>
                            Unfollowed the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'join'" layout="horizontal" layout-align="center center">
                        <span>
                            Joined the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'uploadFile'" layout="horizontal" layout-align="center center">
                        <span>
                            Uploaded a file to the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'removeFile'" layout="horizontal" layout-align="center center">
                        <span>
                            Removed a file from the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'createUrl'" layout="horizontal" layout-align="center center">
                        <span>
                            Added a URL to the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'project' && notif.type == 'removeUrl'" layout="horizontal" layout-align="center center">
                        <span>
                            Removed a URL from the project
                        </span>
                        <project-info project-id="notif.entity"></project-info>
                    </material-tile-content>

                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'createNote'" layout="horizontal" layout-align="center center">
                        <span>Added a note</span>
                        <note-info note-id="notif.entity"></note-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'updateNote'" layout="horizontal" layout-align="center center">
                        <span>Updated the note</span>
                        <note-info note-id="notif.entity"></note-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'removeNote'" layout="horizontal" layout-align="center center">
                        <span>Removed a note</span>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'createComment'" layout="horizontal" layout-align="center center">
                        <span>Added a comment on</span>
                        <note-info note-id="notif.entity"></note-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'updateComment'" layout="horizontal" layout-align="center center">
                        <span>Updated the comment on</span>
                        <note-info note-id="notif.entity"></note-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'note' && notif.type == 'removeComment'" layout="horizontal" layout-align="center center">
                        <span>Removed a comment on</span>
                        <note-info note-id="notif.entity"></note-info>
                    </material-tile-content>

                    <material-tile-content ng-if="notif.entityType == 'profile' && notif.type == 'follow'" layout="horizontal" layout-align="center center">
                        <span>
                            Followed the user
                        </span>
                        <user-info user-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'profile' && notif.type == 'unfollow'" layout="horizontal" layout-align="center center">
                        <span>
                            Unfollowed the user
                        </span>
                        <user-info user-id="notif.entity"></project-info>
                    </material-tile-content>
                    <material-tile-content ng-if="notif.entityType == 'profile' && notif.type == 'update'" layout="horizontal" layout-align="center center">
                        <span>
                            Updated their profile 
                        </span>
                        <user-info user-id="notif.entity"></project-info>
                    </material-tile-content>
                </material-item>
            </div>
        </material-list>
    </material-content>
</section>
