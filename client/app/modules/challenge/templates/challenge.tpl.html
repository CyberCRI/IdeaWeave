<section layout="vertical" layout-fill>
    <material-toolbar scroll-shrink class="home-header"  style="background-image: url({{ challenge.banner || 'http://placehold.it/900x150'  }}) !important;" >
        <div layout="vertical">
            <h1>
                {{ challenge.title }}
            </h1>
            <div layout="horizontal" style="height:37px;box-shadow: none">
                <div flex>
                    <span>
                        {{ challenge.followers.length }}
                    </span>
                    <span class="text-muted">
                        &nbsp;followers
                    </span>
                    <span>
                        . {{ challenge.projects.length }}
                    </span>
                    <span class="text-muted">
                        &nbsp;projects
                    </span>
                </div>
                <div ng-if="currentUser">
                    <material-button  ng-if="!isOwner && !isFollow"  ng-click="follow()" class="rotation">
                        <i class="fa fa-thumbs-up"></i>
                        follow
                    </material-button>
                    <material-button  ng-if="!isOwner && isFollow" ng-click="unfollow()" class="rotation">
                        <i class="fa fa-thumbs-down" ></i>
                        unfollow
                    </material-button>
                </div>
            </div>

            <!--<span ng-if="challenge.startDate < now && challenge.endDate > now" >-->
                <!--<timer end-time="challenge.endDate" >End in :{{days}} d, {{hours}} : {{minutes}} : {{seconds}}</timer>-->
            <!--</span>-->
            <!--<span ng-if="challenge.startDate > now" >-->
                <!--<timer end-time="challenge.endDate" >Start in : {{days}} d, {{hours}} : {{minutes}} : {{seconds}}</timer>-->
            <!--</span>-->


        </div>
    </material-toolbar>

    <material-content flex >
        <showtags entity="challenge"></showtags>
        <section class="challenge-home" layout="vertical">
            <section layout="vertical"  layout-md="horizontal">
                <article class="html-content" flex ng-bind-html="challenge.home">

                </article>
                <div class="chat-container" flex ng-include="'modules/challenge/templates/chat.tpl.html'" style="resize: horizontal;"></div>
            </section>
            <div class="participate-btn">
                <material-button  ng-if="currentUser"  ng-click="participate()" class="material-button-raised material-button-colored">
                    Participate to this challenge
                </material-button>
            </div>
        </section>
        <section >
            <project-card inline-block project-id="project" ng-repeat="project in challenge.projects"></project-card>
        </section>
    </material-content>
</section>