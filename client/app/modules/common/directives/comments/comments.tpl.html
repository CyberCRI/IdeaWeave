<div class="pull-right">{{ 'BTN_COMMENT' | translate }}({{comments.length}})</div>
<i class="fa fa-comment fa-2x my-btn pull-left" ng-click="showForm()" ng-if="me"></i>
<div class="clearfix"></div>
<div collapse="toggleComment" >
    <textarea ui-tinymce ng-model="commentValue" placeholder="I think..." required ></textarea>
    <a class="btn btn-default" ng-click="addComment()">{{ 'BTN_COMMENT' | translate }}</a>
</div>
<div class="comments">
    <div ng-repeat="comment in comments track by $index" class="pam">
        <div ng-if="!comment.parent">
            <div user-block="comment.owner" class="pull-left mrm"></div>
            <div class="pas text-muted" style="background: #f2fbf2; height:30px;">
                <span class="text-muted pull-right">{{comment.createDate|timeago}}</span>
            </div>
            <div class="clearfix"></div>
            <div class="pam" ng-bind-html="comment.displayText"></div>
            <span class="pull-right">
                answers({{ comment.answers.length }})
                <i class="fa fa-comments fa-2x my-btn" ng-click="comment.isReply=!comment.isReply"></i>
            </span>
            <div class="clearfix"></div>
            <div ng-init="comment.isReply=true" collapse="comment.isReply" >
                <div  class="mts  pam" ng-if="me">
                    <textarea ui-tinymce ng-model="comment.replyComment" placeholder="Reply..."></textarea>
                    <br><a class="btn btn-default" ng-click="replyComment(comment.id,$index)">Reply</a>
                </div>
                <div ng-if="comment.answers" ng-repeat="answer in comment.answers" class="mll mtm">
                    <blockquote >
                        <div user-block="answer.owner" class="pull-left mrm"></div>
                        <div class="pas text-muted" style="background: #f2fbf2;">
                            <a href="user/{{answer.owner}}">{{user[answer.owner].username}}</a> <a class="pull-right" ng-click="removeComment(answer.id,$index)"><i class="icon-remove"></i></a><span class="text-muted pull-right">{{answer.createDate|timeago}}</span>
                        </div>
                        <div class="clearfix"></div>
                        <div class="pam" ng-bind-html="answer.displayText"></div>
                    </blockquote>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
